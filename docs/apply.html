---

title: Apply preprocessing to db

keywords: fastai
sidebar: home_sidebar

summary: "API"
description: "API"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/apply.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="preprocess_db" class="doc_header"><code>preprocess_db</code><a href="https://github.com/mlippeve/ifcimglib/tree/master/ifcimglib/apply.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>preprocess_db</code>(<strong><code>db</code></strong>, <strong><code>preprocessed_output_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">imglmdb</span><span class="o">.</span><span class="n">imglmdb</span><span class="p">(</span><span class="s2">&quot;/home/maximl/scratch/data/wbc/wbc_2/set1/all stains laser on 60x_1_Focused &amp; Singlets &amp; CD45 pos.lmdb&quot;</span><span class="p">)</span>
<span class="n">preprocess_db</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s2">&quot;/home/maximl/scratch/data/wbc/wbc_2/set1/CD45_focused_singlets_preprocessed.lmdb&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">imglmdb</span><span class="o">.</span><span class="n">imglmdb</span><span class="p">(</span><span class="s2">&quot;/home/maximl/scratch/data/wbc/wbc_2/set1/CD45_focused_singlets_preprocessed.lmdb&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">i</span> <span class="o">=</span> <span class="p">((</span><span class="n">i</span> <span class="o">-</span> <span class="n">i</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">/</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">i</span><span class="o">.</span><span class="n">min</span><span class="p">()))</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">iinfo</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">uint16</span><span class="p">)</span><span class="o">.</span><span class="n">max</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">uint16</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.image.AxesImage at 0x7f8f615a3820&gt;</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">db_path</span> <span class="ow">in</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/home/maximl/scratch/data/wbc/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s2">&quot;*.lmdb&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;preprocessed&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">)]:</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">imglmdb</span><span class="o">.</span><span class="n">imglmdb</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">db_path</span><span class="p">))</span>
    <span class="n">preprocess_db</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">db_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;CD45_focused_singlets_preprocessed.lmdb&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>100%|██████████| 23030/23030 [00:15&lt;00:00, 1485.72it/s]
100%|██████████| 23030/23030 [00:02&lt;00:00, 8085.61it/s]
100%|██████████| 23030/23030 [00:10&lt;00:00, 2273.73it/s]
100%|██████████| 24051/24051 [00:16&lt;00:00, 1450.45it/s]
100%|██████████| 24051/24051 [00:02&lt;00:00, 8313.47it/s]
100%|██████████| 24051/24051 [00:10&lt;00:00, 2363.25it/s]
100%|██████████| 24518/24518 [00:17&lt;00:00, 1397.93it/s]
100%|██████████| 24518/24518 [00:03&lt;00:00, 7628.65it/s]
100%|██████████| 24518/24518 [00:10&lt;00:00, 2360.72it/s]
100%|██████████| 21432/21432 [00:15&lt;00:00, 1366.65it/s]
100%|██████████| 21432/21432 [00:02&lt;00:00, 7281.23it/s]
100%|██████████| 21432/21432 [00:08&lt;00:00, 2436.99it/s]
100%|██████████| 23176/23176 [00:15&lt;00:00, 1454.06it/s]
100%|██████████| 23176/23176 [00:03&lt;00:00, 7495.95it/s]
100%|██████████| 23176/23176 [00:10&lt;00:00, 2288.83it/s]
100%|██████████| 23402/23402 [00:16&lt;00:00, 1445.52it/s]
100%|██████████| 23402/23402 [00:02&lt;00:00, 8252.76it/s]
100%|██████████| 23402/23402 [00:10&lt;00:00, 2295.11it/s]
100%|██████████| 29994/29994 [00:20&lt;00:00, 1473.08it/s]
100%|██████████| 29994/29994 [00:03&lt;00:00, 7871.99it/s]
100%|██████████| 29994/29994 [00:11&lt;00:00, 2647.56it/s]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

